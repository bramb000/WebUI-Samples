import{q as E,x as de,d as Z,o as p,c as m,a as e,t as A,F as z,g as K,m as oe,k as B,_ as te,y as ce,n as V,z as re,l as Q,A as Y,i as pe,B as xe,j as fe,p as ye,C as Ie,e as we,u as M,f as ae,w as ue,b as Ne}from"./index-B8k5TZ8I.js";import{_ as $e}from"./ExperimentWrapper.vue_vue_type_script_setup_true_lang-CVWQElCG.js";const ke={integer:"#EE4F94",add:"#4F8EEE",subtract:"#4F8EEE"};function De(){return[{id:"int-a",type:"integer",label:"INT",position:{x:60,y:120},value:5,execInputs:[],execOutputs:[],inputs:[],outputs:[{id:"int-a-out",label:"",direction:"output",type:"number"}],shortDescription:"An integer",detailedInfo:{signature:"INT( value )",description:"Outputs a constant integer value that can be connected to other nodes as input.",params:[]},examplesData:{title:"INT",subtitle:"An integer",notes:["Integer values support whole numbers only.","To use decimal values, cast to a float or double data type."]}},{id:"int-b",type:"integer",label:"INT",position:{x:60,y:310},value:5,execInputs:[],execOutputs:[],inputs:[],outputs:[{id:"int-b-out",label:"",direction:"output",type:"number"}],shortDescription:"An integer",detailedInfo:{signature:"INT( value )",description:"Outputs a constant integer value that can be connected to other nodes as input.",params:[]},examplesData:{title:"INT",subtitle:"An integer",notes:["Integer values support whole numbers only.","To use decimal values, cast to a float or double data type."]}},{id:"add",type:"add",label:"ADD",position:{x:350,y:100},execInputs:[{id:"add-exec-in",label:"",direction:"input",type:"exec"}],execOutputs:[{id:"add-exec-out",label:"",direction:"output",type:"exec"}],inputs:[{id:"add-in1",label:"Number 1",direction:"input",type:"number"},{id:"add-in2",label:"Number 2",direction:"input",type:"number"}],outputs:[{id:"add-out",label:"Result",direction:"output",type:"number"}],shortDescription:"Add two numbers and output the result",detailedInfo:{signature:"ADD( value1, value2 )",description:"Add two numeric values. Automatically detect output type based on inputs.",params:[{name:"value1",description:"Accepts int, float, double"},{name:"value2",description:"Accepts int, float, double"}],examplesLink:"#"},examplesData:{title:"ADD",subtitle:"Add two numbers and output the result",notes:["If the output has a decimal point, the result will automatically be cast to double.","If both inputs are an integer, the result will automatically be an integer. You can choose to cast it to another data type."]}},{id:"int-c",type:"integer",label:"INT",position:{x:650,y:500},value:5e4,execInputs:[],execOutputs:[],inputs:[],outputs:[{id:"int-c-out",label:"",direction:"output",type:"number"}],shortDescription:"An integer",detailedInfo:{signature:"INT( value )",description:"Outputs a constant integer value that can be connected to other nodes as input.",params:[]},examplesData:{title:"INT",subtitle:"An integer",notes:["Integer values support whole numbers only.","To use decimal values, cast to a float or double data type."]}},{id:"subtract",type:"subtract",label:"SUB",position:{x:920,y:310},execInputs:[{id:"sub-exec-in",label:"",direction:"input",type:"exec"}],execOutputs:[{id:"sub-exec-out",label:"",direction:"output",type:"exec"}],inputs:[{id:"sub-in1",label:"Number 1",direction:"input",type:"number"},{id:"sub-in2",label:"Number 2",direction:"input",type:"number"}],outputs:[{id:"sub-out",label:"Result",direction:"output",type:"number"}],shortDescription:"Subtract number 2 from number 1",detailedInfo:{signature:"SUB( value1, value2 )",description:"Subtract the second numeric value from the first. Automatically detect output type based on inputs.",params:[{name:"value1",description:"Accepts int, float, double"},{name:"value2",description:"Accepts int, float, double"}],examplesLink:"#"},examplesData:{title:"SUB",subtitle:"Subtract number 2 from number 1",notes:["If the output has a decimal point, the result will automatically be cast to double.","If both inputs are an integer, the result will automatically be an integer. You can choose to cast it to another data type."]}}]}function _e(){return[{id:"conn-1",fromNodeId:"int-a",fromPinId:"int-a-out",toNodeId:"add",toPinId:"add-in1"},{id:"conn-2",fromNodeId:"int-b",fromPinId:"int-b-out",toNodeId:"add",toPinId:"add-in2"},{id:"conn-3",fromNodeId:"add",fromPinId:"add-out",toNodeId:"subtract",toPinId:"sub-in1"},{id:"conn-4",fromNodeId:"int-c",fromPinId:"int-c-out",toNodeId:"subtract",toPinId:"sub-in2"},{id:"exec-1",fromNodeId:"add",fromPinId:"add-exec-out",toNodeId:"subtract",toPinId:"sub-exec-in"}]}function Ee(){const t=E(De()),b=E(_e()),n=de({active:!1,nodeId:null,offsetX:0,offsetY:0}),f=de({active:!1,fromNodeId:null,fromPinId:null,mouseX:0,mouseY:0}),s=E(null),$=E(!1),g=E(null);function h(d){return t.value.find(r=>r.id===d)}function o(d,r,I){const k=h(d);k&&(k.position.x=r,k.position.y=I)}function _(d,r){const I=h(d);I&&I.type==="integer"&&(I.value=r)}function C(d,r,I){const k=h(d);k&&(n.active=!0,n.nodeId=d,n.offsetX=r-k.position.x,n.offsetY=I-k.position.y)}function X(d,r){!n.active||!n.nodeId||o(n.nodeId,d-n.offsetX,r-n.offsetY)}function U(){n.active=!1,n.nodeId=null}function l(d,r,I,k){f.active=!0,f.fromNodeId=d,f.fromPinId=r,f.mouseX=I,f.mouseY=k}function w(d,r){f.active&&(f.mouseX=d,f.mouseY=r)}function O(d,r){f.active&&d&&r&&f.fromNodeId&&f.fromPinId&&y(f.fromNodeId,f.fromPinId,d,r)&&a(f.fromNodeId,f.fromPinId,d,r),f.active=!1,f.fromNodeId=null,f.fromPinId=null}function y(d,r,I,k){if(d===I)return!1;const W=h(d),x=h(I);if(!W||!x)return!1;const H=[...W.outputs,...W.execOutputs],D=[...x.inputs,...x.execInputs],N=H.find(T=>T.id===r),P=D.find(T=>T.id===k);return!(!N||!P||N.type!==P.type||b.value.some(T=>T.toNodeId===I&&T.toPinId===k))}function a(d,r,I,k){const W=`conn-${Date.now()}`;b.value.push({id:W,fromNodeId:d,fromPinId:r,toNodeId:I,toPinId:k})}function u(d){b.value=b.value.filter(r=>r.id!==d)}function L(){$.value=!0,g.value=null;try{const d=new Map;t.value.forEach(D=>d.set(D.id,D));const r=new Map,I=new Map;t.value.forEach(D=>{r.set(D.id,0),I.set(D.id,[])}),b.value.forEach(D=>{var N;(N=I.get(D.fromNodeId))==null||N.push(D.toNodeId),r.set(D.toNodeId,(r.get(D.toNodeId)||0)+1)});const k=[];r.forEach((D,N)=>{D===0&&k.push(N)});const W=[];for(;k.length>0;){const D=k.shift();W.push(D);for(const N of I.get(D)||[]){const P=(r.get(N)||1)-1;r.set(N,P),P===0&&k.push(N)}}const x=new Map;for(const D of W){const N=d.get(D);if(N.type==="integer")x.set(N.id,N.value??0);else if(N.type==="add"){const P=b.value.filter(S=>S.toNodeId===N.id),G=P.find(S=>S.toPinId==="add-in1"),T=P.find(S=>S.toPinId==="add-in2");if(!G||!T)return g.value=`${N.label}: Missing input connection`,null;const j=x.get(G.fromNodeId)??0,J=x.get(T.fromNodeId)??0;x.set(N.id,j+J)}else if(N.type==="subtract"){const P=b.value.filter(S=>S.toNodeId===N.id),G=P.find(S=>S.toPinId==="sub-in1"),T=P.find(S=>S.toPinId==="sub-in2");if(!G||!T)return g.value=`${N.label}: Missing input connection`,null;const j=x.get(G.fromNodeId)??0,J=x.get(T.fromNodeId)??0;x.set(N.id,j-J)}}const H=x.get("subtract")??null;return s.value=H,setTimeout(()=>{$.value=!1},1500),H}catch{return g.value="Evaluation failed",$.value=!1,null}}return{dragState:n,wireDrag:f,nodes:t,connections:b,executionResult:s,isRunning:$,executionError:g,startNodeDrag:C,onNodeDrag:X,endNodeDrag:U,startWireDrag:l,onWireDrag:w,endWireDrag:O,addConnection:a,removeConnection:u,updateNodeValue:_,evaluate:L}}function ie(t,b){if(t.execInputs.some(l=>l.id===b))return{x:24,y:75};if(t.execOutputs.some(l=>l.id===b))return{x:345,y:75};if(t.type==="integer")return t.outputs.some(l=>l.id===b)?{x:143,y:76}:null;const X=t.outputs.findIndex(l=>l.id===b);if(X!==-1)return{x:349,y:110+X*26};const U=t.inputs.findIndex(l=>l.id===b);return U!==-1?{x:20,y:110+U*26}:null}const Ce={class:"info-panel",role:"region","aria-label":"Detailed node information"},Pe={class:"info-content"},Ae={class:"info-signature"},Me={class:"info-description"},Te={class:"param-name"},Xe={class:"param-desc"},Se=Z({__name:"NodeInfoPanel",props:{info:{}},emits:["seeExamples"],setup(t,{emit:b}){const n=b;return(f,s)=>(p(),m("div",Ce,[s[1]||(s[1]=e("div",{class:"info-separator","aria-hidden":"true"},null,-1)),e("div",Pe,[e("p",Ae,A(t.info.signature),1),e("p",Me,A(t.info.description),1),(p(!0),m(z,null,K(t.info.params,$=>(p(),m("div",{key:$.name,class:"info-param"},[e("span",Te,A($.name),1),e("span",Xe,A($.description),1)]))),128)),t.info.examplesLink?(p(),m("button",{key:0,class:"info-examples-link",onClick:s[0]||(s[0]=oe($=>n("seeExamples"),["prevent"])),"aria-label":"See examples for this node"}," See examples ")):B("",!0)])]))}}),Oe=te(Se,[["__scopeId","data-v-21bd78b3"]]),Re=["data-node-id","data-node-type","aria-label"],Ye=["aria-label"],Be={class:"node-title"},We={class:"node-subtitle"},Ve={class:"node-body"},Ue={key:0,class:"exec-row"},Le=["data-pin-id","onMouseup","aria-label"],Ge=["data-pin-id","onMousedown","aria-label"],Fe={key:1,class:"int-row"},ze=["value","aria-label"],Ke=["data-pin-id","aria-label"],qe={class:"pin-side pin-side--left"},He=["data-pin-id","onMouseup","aria-label"],je={class:"pin-label"},Je={key:0,class:"pin-side pin-side--right"},Qe={class:"pin-label"},Ze=["data-pin-id","aria-label"],et=["aria-expanded"],tt=Z({__name:"GraphNode",props:{node:{},connections:{},isRunning:{type:Boolean}},emits:["startDrag","startWireDrag","pinDrop","updateValue","openExamples"],setup(t,{emit:b}){const n=t,f=b,s=E(!1),$=Y(()=>ke[n.node.type]),g=Y(()=>n.node.type==="integer"),h=Y(()=>g.value?163:369);function o(y){return n.connections.some(a=>a.fromPinId===y&&a.fromNodeId===n.node.id||a.toPinId===y&&a.toNodeId===n.node.id)}function _(y){y.preventDefault(),f("startDrag",n.node.id,y.clientX,y.clientY)}function C(y,a){a.preventDefault(),a.stopPropagation(),f("startWireDrag",n.node.id,y,a.clientX,a.clientY)}function X(y){f("pinDrop",n.node.id,y)}function U(y){const a=parseInt(y.target.value);isNaN(a)||f("updateValue",n.node.id,a)}function l(y){y.key==="Escape"&&s.value&&(s.value=!1,y.stopPropagation())}function w(){f("openExamples",n.node.id)}const O=Y(()=>g.value?`${n.node.label} node, value ${n.node.value}`:`${n.node.label} node: ${n.node.shortDescription}`);return(y,a)=>(p(),m("div",{class:V(["graph-node",{"graph-node--compact":g.value,"graph-node--wide":!g.value,"graph-node--running":t.isRunning}]),style:ce({left:t.node.position.x+"px",top:t.node.position.y+"px",width:h.value+"px","--header-color":$.value}),"data-node-id":t.node.id,"data-node-type":t.node.type,role:"group","aria-label":O.value,tabindex:"0",onKeydown:l},[e("div",{class:"node-header",onMousedown:_,role:"button","aria-label":`Drag to move ${t.node.label} node`},[e("span",Be,A(t.node.label),1),e("span",We,A(t.node.shortDescription),1)],40,Ye),e("div",Ve,[g.value?B("",!0):(p(),m("div",Ue,[(p(!0),m(z,null,K(t.node.execInputs,u=>(p(),m("div",{key:u.id,class:V(["exec-pin exec-pin--in",{connected:o(u.id)}]),"data-pin-id":u.id,"data-pin-dir":"input",onMouseup:L=>X(u.id),role:"button","aria-label":`Execution input${o(u.id)?", connected":""}`,tabindex:"0"},[...a[5]||(a[5]=[e("svg",{width:"12",height:"14",viewBox:"0 0 12 14","aria-hidden":"true"},[e("polygon",{points:"1,1 11,7 1,13",fill:"currentColor"})],-1)])],42,Le))),128)),(p(!0),m(z,null,K(t.node.execOutputs,u=>(p(),m("div",{key:u.id,class:V(["exec-pin exec-pin--out",{connected:o(u.id)}]),"data-pin-id":u.id,"data-pin-dir":"output",onMousedown:L=>C(u.id,L),role:"button","aria-label":`Execution output${o(u.id)?", connected":""}`,tabindex:"0"},[...a[6]||(a[6]=[e("svg",{width:"12",height:"14",viewBox:"0 0 12 14","aria-hidden":"true"},[e("polygon",{points:"1,1 11,7 1,13",fill:"currentColor"})],-1)])],42,Ge))),128))])),g.value?(p(),m("div",Fe,[e("input",{type:"number",class:"int-value-input",value:t.node.value,onInput:U,"aria-label":`Value for ${t.node.label} node`},null,40,ze),t.node.outputs[0]?(p(),m("div",{key:0,class:V(["data-pin data-pin--output",{connected:o(t.node.outputs[0].id)}]),"data-pin-id":t.node.outputs[0].id,"data-pin-dir":"output",onMousedown:a[0]||(a[0]=u=>C(t.node.outputs[0].id,u)),role:"button","aria-label":`Output pin${o(t.node.outputs[0].id)?", connected":""}`,tabindex:"0"},null,42,Ke)):B("",!0)])):B("",!0),g.value?B("",!0):(p(!0),m(z,{key:2},K(t.node.inputs,(u,L)=>(p(),m("div",{key:u.id,class:"pin-row"},[e("div",qe,[e("div",{class:V(["data-pin data-pin--input",{connected:o(u.id)}]),"data-pin-id":u.id,"data-pin-dir":"input",onMouseup:d=>X(u.id),role:"button","aria-label":`${u.label} input${o(u.id)?", connected":""}`,tabindex:"0"},null,42,He),e("span",je,A(u.label),1)]),L===0&&t.node.outputs[0]?(p(),m("div",Je,[e("span",Qe,A(t.node.outputs[0].label),1),e("div",{class:V(["data-pin data-pin--output",{connected:o(t.node.outputs[0].id)}]),"data-pin-id":t.node.outputs[0].id,"data-pin-dir":"output",onMousedown:a[1]||(a[1]=d=>C(t.node.outputs[0].id,d)),role:"button","aria-label":`${t.node.outputs[0].label} output${o(t.node.outputs[0].id)?", connected":""}`,tabindex:"0"},null,42,Ze)])):B("",!0)]))),128)),e("div",{class:"more-info-toggle",onClick:a[2]||(a[2]=u=>s.value=!s.value),role:"button","aria-expanded":s.value,"aria-label":"Toggle more information",tabindex:"0",onKeydown:[a[3]||(a[3]=re(oe(u=>s.value=!s.value,["prevent"]),["enter"])),a[4]||(a[4]=re(oe(u=>s.value=!s.value,["prevent"]),["space"]))]},[(p(),m("svg",{width:"8",height:"8",viewBox:"0 0 8 8",class:V(["toggle-chevron",{open:s.value}]),"aria-hidden":"true"},[...a[7]||(a[7]=[e("polygon",{points:"1,0.5 7,4 1,7.5",fill:"currentColor"},null,-1)])],2)),a[8]||(a[8]=e("span",null,"More info",-1))],40,et),s.value?(p(),Q(Oe,{key:3,info:t.node.detailedInfo,onSeeExamples:w},null,8,["info"])):B("",!0)])],46,Re))}}),nt=te(tt,[["__scopeId","data-v-d1608ea1"]]),ot=["aria-label"],at=["d"],it=["d","stroke","stroke-width"],st=["transform","aria-label"],lt=Z({__name:"GraphWire",props:{connection:{},nodes:{},isRunning:{type:Boolean}},emits:["disconnect"],setup(t,{emit:b}){const n=t,f=b,s=E(!1),$=Y(()=>n.nodes.find(l=>l.id===n.connection.fromNodeId)),g=Y(()=>n.nodes.find(l=>l.id===n.connection.toNodeId)),h=Y(()=>{const l=$.value;return l?l.execOutputs.some(w=>w.id===n.connection.fromPinId):!1}),o=Y(()=>{const l=$.value;if(!l)return{x:0,y:0};const w=ie(l,n.connection.fromPinId);return w?{x:l.position.x+w.x,y:l.position.y+w.y}:{x:0,y:0}}),_=Y(()=>{const l=g.value;if(!l)return{x:0,y:0};const w=ie(l,n.connection.toPinId);return w?{x:l.position.x+w.x,y:l.position.y+w.y}:{x:0,y:0}}),C=Y(()=>{const l=o.value.x,w=o.value.y,O=_.value.x,y=_.value.y,a=Math.abs(O-l)*.5;return`M ${l} ${w} C ${l+a} ${w}, ${O-a} ${y}, ${O} ${y}`}),X=Y(()=>({x:(o.value.x+_.value.x)/2,y:(o.value.y+_.value.y)/2}));function U(l){l.stopPropagation(),f("disconnect",n.connection.id)}return(l,w)=>{var O,y,a,u;return p(),m("g",{class:V(["graph-wire",{"graph-wire--exec":h.value}]),onMouseenter:w[0]||(w[0]=L=>s.value=!0),onMouseleave:w[1]||(w[1]=L=>s.value=!1),role:"group","aria-label":`${h.value?"Execution":"Data"} wire from ${(O=$.value)==null?void 0:O.label} to ${(y=g.value)==null?void 0:y.label}`},[e("path",{d:C.value,fill:"none",stroke:"transparent","stroke-width":"16",style:{cursor:"pointer"}},null,8,at),e("path",{d:C.value,fill:"none",stroke:s.value?"var(--wire-hover, #999)":"var(--wire-color, #AAA)","stroke-width":s.value?3:2,"stroke-linecap":"round",class:V({running:t.isRunning}),style:{transition:"stroke-width 0.15s ease, stroke 0.15s ease"}},null,10,it),s.value?(p(),m("g",{key:0,class:"disconnect-btn",transform:`translate(${X.value.x}, ${X.value.y})`,onClick:U,style:{cursor:"pointer"},role:"button","aria-label":`Disconnect ${h.value?"execution":"data"} wire from ${(a=$.value)==null?void 0:a.label} to ${(u=g.value)==null?void 0:u.label}`,tabindex:"0"},[...w[2]||(w[2]=[e("circle",{r:"10",fill:"var(--wire-disconnect-bg, #E53E3E)",opacity:"0.95"},null,-1),e("line",{x1:"-3.5",y1:"-3.5",x2:"3.5",y2:"3.5",stroke:"white","stroke-width":"1.5","stroke-linecap":"round"},null,-1),e("line",{x1:"3.5",y1:"-3.5",x2:"-3.5",y2:"3.5",stroke:"white","stroke-width":"1.5","stroke-linecap":"round"},null,-1)])],8,st)):B("",!0)],42,ot)}}}),dt=te(lt,[["__scopeId","data-v-9db2e6e3"]]),rt=["data-theme"],ut={class:"modal-header"},ct={id:"modal-title",class:"modal-title"},pt={class:"modal-subtitle"},ft={class:"modal-section"},vt={class:"modal-syntax-visual"},mt={class:"syntax-placeholder","aria-label":"Visual example of node connection syntax"},ht={class:"syntax-node syntax-node--op",style:{top:"10px",left:"180px"}},bt={class:"sn-header sn-header--op"},gt={class:"sn-title"},xt={class:"sn-sub"},yt={class:"modal-section"},It={class:"modal-notes"},wt=Z({__name:"ExamplesModal",props:{data:{},theme:{default:"light"}},emits:["close"],setup(t,{emit:b}){const n=b,f=E(null),s=E(null);function $(h){h.target===h.currentTarget&&n("close")}function g(h){if(h.key==="Escape"&&n("close"),h.key==="Tab"&&f.value){const o=f.value.querySelectorAll('button, [tabindex]:not([tabindex="-1"]), input, a[href]');if(o.length===0)return;const _=o[0],C=o[o.length-1];h.shiftKey&&document.activeElement===_?(h.preventDefault(),C.focus()):!h.shiftKey&&document.activeElement===C&&(h.preventDefault(),_.focus())}}return pe(()=>{document.addEventListener("keydown",g),xe(()=>{var h;(h=s.value)==null||h.focus()})}),fe(()=>{document.removeEventListener("keydown",g)}),(h,o)=>(p(),Q(ye,{to:"body"},[e("div",{class:"modal-backdrop","data-theme":t.theme,onClick:$,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},[e("div",{class:"modal-card",ref_key:"modalRef",ref:f},[e("button",{ref_key:"closeButtonRef",ref:s,class:"modal-close",onClick:o[0]||(o[0]=_=>n("close")),"aria-label":"Close examples dialog"},[...o[1]||(o[1]=[e("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none","aria-hidden":"true"},[e("line",{x1:"3",y1:"3",x2:"13",y2:"13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),e("line",{x1:"13",y1:"3",x2:"3",y2:"13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])],512),e("div",ut,[e("h2",ct,A(t.data.title),1),e("p",pt,A(t.data.subtitle),1)]),e("div",ft,[o[7]||(o[7]=e("h3",{class:"modal-section-title"},"Syntax",-1)),e("div",vt,[e("div",mt,[o[4]||(o[4]=e("div",{class:"syntax-node syntax-node--int",style:{top:"10px",left:"10px"}},[e("div",{class:"sn-header sn-header--int"},[e("span",{class:"sn-title"},"INT"),e("span",{class:"sn-sub"},"An integer")]),e("div",{class:"sn-body"},[e("span",{class:"sn-value"},"5"),e("span",{class:"sn-dot sn-dot--filled"})])],-1)),e("div",ht,[e("div",bt,[e("span",gt,A(t.data.title),1),e("span",xt,A(t.data.subtitle),1)]),o[2]||(o[2]=e("div",{class:"sn-exec-row"},[e("div",{class:"sn-exec-pin sn-exec-pin--in"},[e("svg",{width:"10",height:"12",viewBox:"0 0 12 14","aria-hidden":"true"},[e("polygon",{points:"1,1 11,7 1,13"})])]),e("div",{class:"sn-exec-pin sn-exec-pin--out"},[e("svg",{width:"10",height:"12",viewBox:"0 0 12 14","aria-hidden":"true"},[e("polygon",{points:"1,1 11,7 1,13"})])])],-1)),o[3]||(o[3]=e("div",{class:"sn-body sn-body--op"},[e("div",{class:"sn-pin-row"},[e("div",{class:"sn-pin-left"},[e("span",{class:"sn-dot"}),e("span",{class:"sn-label"},"Number 1")]),e("div",{class:"sn-pin-right"},[e("span",{class:"sn-label"},"Result"),e("span",{class:"sn-dot"})])]),e("div",{class:"sn-pin-row"},[e("div",{class:"sn-pin-left"},[e("span",{class:"sn-dot"}),e("span",{class:"sn-label"},"Number 2")])])],-1))]),o[5]||(o[5]=e("div",{class:"syntax-node syntax-node--int",style:{top:"150px",left:"10px"}},[e("div",{class:"sn-header sn-header--int"},[e("span",{class:"sn-title"},"INT"),e("span",{class:"sn-sub"},"An integer")]),e("div",{class:"sn-body"},[e("span",{class:"sn-value"},"5"),e("span",{class:"sn-dot sn-dot--filled"})])],-1)),o[6]||(o[6]=e("svg",{class:"syntax-wires",width:"100%",height:"100%"},[e("path",{d:"M 130 50 C 155 50, 165 90, 190 90",fill:"none",stroke:"#AAA","stroke-width":"2","stroke-linecap":"round"}),e("path",{d:"M 130 192 C 155 192, 165 115, 190 115",fill:"none",stroke:"#AAA","stroke-width":"2","stroke-linecap":"round"})],-1))])])]),e("div",yt,[o[8]||(o[8]=e("h3",{class:"modal-section-title"},"Notes",-1)),e("div",It,[(p(!0),m(z,null,K(t.data.notes,(_,C)=>(p(),m("p",{key:C,class:"modal-note"},A(_),1))),128))])])],512)],8,rt)]))}}),Nt=te(wt,[["__scopeId","data-v-93ae6406"]]),$t=["data-theme"],kt={class:"canvas-grid",width:"100%",height:"100%","aria-hidden":"true"},Dt=["x","y","width","height"],_t=["cx","cy","r"],Et={class:"canvas-toolbar",role:"toolbar","aria-label":"Node graph controls"},Ct={class:"toolbar-actions"},Pt=["aria-label"],At={key:0,width:"18",height:"18",viewBox:"0 0 18 18","aria-hidden":"true"},Mt=["x1","y1","x2","y2"],Tt={key:1,width:"18",height:"18",viewBox:"0 0 18 18","aria-hidden":"true"},Xt=["disabled","aria-label"],St={key:0,class:"result-badge",role:"status","aria-live":"polite"},Ot={key:1,class:"error-badge",role:"alert","aria-live":"assertive"},Rt={class:"wire-layer","aria-label":"Node connections"},Yt={key:0,class:"wire-drag-layer"},Bt=["d"],Wt=.25,Vt=3,Ut=Z({__name:"NodeGraphCanvas",props:{theme:{default:"light"}},setup(t){const{nodes:b,connections:n,dragState:f,wireDrag:s,executionResult:$,isRunning:g,executionError:h,startNodeDrag:o,onNodeDrag:_,endNodeDrag:C,startWireDrag:X,onWireDrag:U,endWireDrag:l,removeConnection:w,updateNodeValue:O,evaluate:y}=Ee(),a=t,u=E(a.theme);Ie(()=>a.theme,i=>{u.value=i});function L(){u.value=u.value==="light"?"dark":"light"}const d=E(0),r=E(0),I=E(!1),k=E(0),W=E(0),x=E(1);function H(i){i.preventDefault();const v=-i.deltaY*.001,R=Math.min(Vt,Math.max(Wt,x.value*(1+v)));if(R===x.value)return;const F=i.currentTarget.getBoundingClientRect(),ee=i.clientX-F.left,ne=i.clientY-F.top,le=R/x.value;d.value=ee-(ee-d.value)*le,r.value=ne-(ne-r.value)*le,x.value=R}function D(i){i.button===1&&(i.preventDefault(),I.value=!0,k.value=i.clientX-d.value,W.value=i.clientY-r.value)}function N(i){I.value&&i.preventDefault()}const P=E(null);function G(i){const c=b.value.find(v=>v.id===i);c!=null&&c.examplesData&&(P.value=c.examplesData)}function T(){P.value=null}function j(i){if(I.value){d.value=i.clientX-k.value,r.value=i.clientY-W.value;return}if(f.active&&_(i.clientX,i.clientY),s.active){const c=document.querySelector(".node-graph-canvas");if(c){const v=c.getBoundingClientRect();U(i.clientX-v.left,i.clientY-v.top)}}}function J(i){if(I.value&&i.button===1){I.value=!1;return}if(f.active&&C(),s.active){const v=i.target.closest("[data-pin-id]");if(v&&v.dataset.pinDir==="input"){const R=v.closest("[data-node-id]");if(R){l(R.dataset.nodeId,v.dataset.pinId);return}}l()}}function S(i,c,v){o(i,c,v)}function ve(i,c,v,R){const q=document.querySelector(".node-graph-canvas");if(q){const F=q.getBoundingClientRect();X(i,c,v-F.left,R-F.top)}else X(i,c,v,R)}function me(i,c){s.active&&l(i,c)}function he(i){w(i),$.value=null}function be(i,c){O(i,c),$.value=null}const se=Y(()=>{if(!s.active||!s.fromNodeId||!s.fromPinId)return"";const i=b.value.find(ne=>ne.id===s.fromNodeId);if(!i)return"";const c=ie(i,s.fromPinId);if(!c)return"";const v=i.position.x+c.x,R=i.position.y+c.y,q=(s.mouseX-d.value)/x.value,F=(s.mouseY-r.value)/x.value,ee=Math.abs(q-v)*.5;return`M ${v} ${R} C ${v+ee} ${R}, ${q-ee} ${F}, ${q} ${F}`});function ge(){y()}return pe(()=>{window.addEventListener("mousemove",j),window.addEventListener("mouseup",J)}),fe(()=>{window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",J)}),(i,c)=>(p(),m("div",{class:V(["node-graph-canvas",{"is-panning":I.value}]),"data-theme":u.value,onMousedown:D,onContextmenu:N,onWheel:oe(H,["prevent"])},[(p(),m("svg",kt,[e("defs",null,[e("pattern",{id:"dot-pattern",x:d.value%(24*x.value),y:r.value%(24*x.value),width:24*x.value,height:24*x.value,patternUnits:"userSpaceOnUse"},[e("circle",{cx:12*x.value,cy:12*x.value,r:Math.max(.5,1*x.value),fill:"var(--grid-dot)"},null,8,_t)],8,Dt)]),c[0]||(c[0]=e("rect",{width:"100%",height:"100%",fill:"url(#dot-pattern)"},null,-1))])),e("div",Et,[c[5]||(c[5]=we('<div class="toolbar-left" data-v-7153fc29><div class="toolbar-title" data-v-7153fc29><svg width="20" height="20" viewBox="0 0 20 20" class="toolbar-icon" aria-hidden="true" data-v-7153fc29><rect x="2" y="2" width="6" height="6" rx="1" fill="#4F8EEE" data-v-7153fc29></rect><rect x="12" y="2" width="6" height="6" rx="1" fill="#EE4F94" data-v-7153fc29></rect><rect x="2" y="12" width="6" height="6" rx="1" fill="#EE4F94" data-v-7153fc29></rect><rect x="12" y="12" width="6" height="6" rx="1" fill="#4F8EEE" data-v-7153fc29></rect></svg><span data-v-7153fc29>Node Graph</span></div></div>',1)),e("div",Ct,[e("button",{class:"theme-toggle",onClick:L,"aria-label":`Switch to ${u.value==="light"?"dark":"light"} mode`},[u.value==="light"?(p(),m("svg",At,[c[1]||(c[1]=e("circle",{cx:"9",cy:"9",r:"4",fill:"none",stroke:"currentColor","stroke-width":"1.5"},null,-1)),(p(),m(z,null,K(8,v=>e("line",{key:v,x1:9+6.5*Math.cos((v*45-90)*Math.PI/180),y1:9+6.5*Math.sin((v*45-90)*Math.PI/180),x2:9+8*Math.cos((v*45-90)*Math.PI/180),y2:9+8*Math.sin((v*45-90)*Math.PI/180),stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"},null,8,Mt)),64))])):(p(),m("svg",Tt,[...c[2]||(c[2]=[e("path",{d:"M15 10.5a6 6 0 01-7.5-7.5A6 6 0 1015 10.5z",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))],8,Pt),e("button",{class:V(["run-button",{running:M(g)}]),onClick:ge,disabled:M(g),"aria-label":M(g)?"Graph is running":"Run the node graph"},[c[3]||(c[3]=e("svg",{width:"14",height:"14",viewBox:"0 0 14 14","aria-hidden":"true"},[e("polygon",{points:"2,1 12,7 2,13",fill:"currentColor"})],-1)),ae(" "+A(M(g)?"Running...":"Run"),1)],10,Xt),M($)!==null?(p(),m("div",St,[c[4]||(c[4]=ae(" Result: ",-1)),e("strong",null,A(M($)),1)])):B("",!0),M(h)?(p(),m("div",Ot," ⚠ "+A(M(h)),1)):B("",!0)])]),e("div",{class:"canvas-content",style:ce({transform:`translate(${d.value}px, ${r.value}px) scale(${x.value})`})},[(p(),m("svg",Rt,[(p(!0),m(z,null,K(M(n),v=>(p(),Q(dt,{key:v.id,connection:v,nodes:M(b),"is-running":M(g),onDisconnect:he},null,8,["connection","nodes","is-running"]))),128))])),(p(!0),m(z,null,K(M(b),v=>(p(),Q(nt,{key:v.id,node:v,connections:M(n),"is-running":M(g),onStartDrag:S,onStartWireDrag:ve,onPinDrop:me,onUpdateValue:be,onOpenExamples:G},null,8,["node","connections","is-running"]))),128)),M(s).active&&se.value?(p(),m("svg",Yt,[e("path",{d:se.value,fill:"none",stroke:"var(--wire-color)","stroke-width":"2","stroke-dasharray":"6 3"},null,8,Bt)])):B("",!0)],4),c[6]||(c[6]=e("div",{class:"canvas-hint","aria-hidden":"true"},' Drag headers to move · Drag output pins to connect · Hover wires to disconnect · Click "More info" for details ',-1)),P.value?(p(),Q(Nt,{key:0,data:P.value,theme:u.value,onClose:T},null,8,["data","theme"])):B("",!0)],42,$t))}}),Lt=te(Ut,[["__scopeId","data-v-7153fc29"]]),zt=Z({__name:"NodeGraphView",setup(t){return(b,n)=>(p(),Q($e,{title:"Node Graph Experiment",tags:["Vue 3","SVG & Mouse Events","State Management"],"storybook-id":"components-nodegraph-nodegraph--default","footer-note":"Tip: Use the scroll wheel to zoom and middle-mouse button to pan.","container-class":"h-[75vh] min-h-[600px] relative"},{description:ue(()=>[...n[0]||(n[0]=[ae(" A canvas-based node editor built from scratch in Vue. Features include infinite panning, smooth zooming, bezier wire connections, and a reactive data flow engine. ",-1)])]),default:ue(()=>[Ne(Lt)]),_:1}))}});export{zt as default};
